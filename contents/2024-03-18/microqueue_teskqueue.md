---
date: '2024-03-18'
title: '마이크로태스크 큐, 태스크 큐'
categories: ['Web', 'CS', 'Frontend']
summary: '마이크로태스크 큐(Microtask Queue)와 태스크 큐(Task Queue)는 자바스크립트 엔진에서 비동기 작업을 관리하기 위해 사용되는 큐입니다. '
thumbnail: '../../static/js.png'
---

**마이크로태스크 큐** <br>
Promise와 같은 비동기 작업을 처리하는데 사용되며 Promise 객체가 저장되게 됩니다. 이벤트 루프의 콜 스택이 비어있을 때 실행되며, 우선순위가 높아 태스크 큐보다 먼저 처리됩니다.

- Promise.then() 콜백 함수
- async/await 함수
- MutationObserver 콜백 함수(MutationObserver는 DOM 변경을 관찰하는 API입니다. DOM 노드의 추가, 삭제, 변경 등을 감지하여 콜백 함수를 실행합니다.)
- MessageChannel(MessageChannel은 스크립트 간 통신을 위한 API입니다. 메시지를 주고받는 두 개의 포트를 제공합니다.)

**태스크 큐** <br>
setTimeout, DOM이벤트 핸들러와 같은 비동기 작업을 처리하는데 사용 됩니다. 이벤트 루프는 호출 스택이 비어있을 때 마이크로태스크 큐를 먼저 처리한 후, 태스크 큐에 있는 작업을 처리합니다.

- setTimeout() 콜백 함수
- setInterval() 콜백 함수
- DOM 이벤트 핸들러
- XMLHttpRequest 콜백 함수

**작동 방식**

1. 이벤트 루프는 콜 스택에 작업이 있는지 확인합니다.
2. 콜 스택에 작업이 없으면 마이크로태스크 큐에 작업이 있는지 확인합니다.
3. 마이크로태스크 큐에 작업이 있다면 작업을 꺼내 콜 스택에 추가하고 실행합니다.
4. 마이크로태스크 큐에 작업이 없으면 태스크 큐에 작업이 있는지 확인합니다.
5. 태스크 큐에 작업이 있다면 작업을 꺼내 콜 스택에 추가하고 실행합니다.
6. 콜 스택, 마이크로태스크 큐, 태스크 큐에 작업이 없으면 이벤트 루프는 다시 처음부터 시작합니다.
